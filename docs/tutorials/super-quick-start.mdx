---
title: Super Quick Start - Complete Deployment Guide
description: "Deploy your TEE application in minutes using TypeScript, Python, Rust, or any containerized application on Phala Cloud"
---

# ‚ö° From Zero to Production TEE in Minutes ‚ö°


<section className="mx-auto my-12 w-full max-w-xl rounded-2xl p-px
                    bg-gradient-to-br from-emerald-500/60 via-teal-500/60 to-green-500/60
                    shadow-lg hover:shadow-xl transition">

  {/* Inner glass card */}
  <div className="relative rounded-2xl bg-white/5 backdrop-blur-md px-8 py-10">

    {/* Logo pinned top-right */}
    <div className="absolute top-6 right-6 h-11 w-11 rounded-full bg-white/15
                    flex items-center justify-center shadow-md">
      <img
        src="/docs/images/phala-logo.png"
        alt="Phala Cloud logo"
        className="h-8 w-8 object-contain"
      />
    </div>

    {/* Heading */}
    <h1 className="text-4xl md:text-5xl font-extrabold tracking-tight text-white">
      Deploying to Phala Cloud
    </h1>

    {/* Sub-headline */}
    <p className="mt-4 text-sm font-medium uppercase tracking-wide text-teal-100/80">
      Zero to Confidential Compute in Minutes
    </p>

    {/* Body copy */}
    <p className="mt-4 text-base leading-relaxed text-white/90">
      Spin up a Confidential VM in a few clicks. Claim free credits and deploy your first TEE
      workload &mdash; no setup required.
    </p>

    {/* CTA */}
    <a
      href="https://cloud.phala.network/"
      className="mt-8 inline-flex items-center gap-2 rounded-lg bg-white/10 px-6 py-3
                 font-semibold text-white backdrop-blur-sm transition
                 hover:bg-white/15 focus-visible:ring focus-visible:ring-white/40"
    >
      <svg className="h-5 w-5" viewBox="0 0 24 24" fill="currentColor">
        <path d="M12 2l3.09 6.26 6.91 1.01-5 4.86L18.18 22 12 18.27
                 5.82 22 7 14.13 2 9.27l6.91-1.01L12 2z" />
      </svg>
      Get Started Now
    </a>

  </div>
</section>

--- 
<div className="bg-gradient-to-r from-green-50 to-teal-50 border border-green-200 rounded-lg p-6 mb-8">
  <h3 className="text-lg font-semibold text-green-800 mb-3">üöÄ Phala Cloud Path: Instant TEE Deployment</h3>
  <p className="text-sm text-green-700 mb-4">
    Skip infrastructure setup entirely. Deploy your Docker containers to hardware-secured Trusted Execution Environments using Phala's managed cloud infrastructure. Perfect for immediate results, prototyping, or production deployments where you want to focus on your application rather than platform management.
  </p>
  <div className="grid grid-cols-2 gap-4 text-sm">
    <div>
      <h4 className="font-medium text-green-800">‚úÖ What you get:</h4>
      <ul className="text-green-700 space-y-1 mt-1">
        <li>‚Ä¢ Hardware-enforced TEE security</li>
        <li>‚Ä¢ Instant deployment (5-10 minutes)</li>
        <li>‚Ä¢ No infrastructure management</li>
        <li>‚Ä¢ Production-ready HTTPS endpoints</li>
        <li>‚Ä¢ Built-in monitoring & logging</li>
      </ul>
    </div>
    <div>
      <h4 className="font-medium text-green-800">üìã What you need:</h4>
      <ul className="text-green-700 space-y-1 mt-1">
        <li>‚Ä¢ Docker containers (existing apps work)</li>
        <li>‚Ä¢ Basic command line familiarity</li>
        <li>‚Ä¢ 10 minutes of your time</li>
        <li>‚Ä¢ No special hardware required</li>
      </ul>
    </div>
  </div>
</div>

---

## Step-by-Step Quick Deployment

### Prerequisites
- [Docker installed locally (for building images)](https://docs.docker.com/docker-hub/quickstart/)
- A container registry account ([Docker Hub](https://hub.docker.com/welcome), [GitHub Container Registry](https://github.com/container-registry), etc.)
- [Basic command line knowledge](https://www.geeksforgeeks.org/linux-commands-cheat-sheet/)
- [Your application containerized (see this Docker container tutorial)](https://medium.com/@komalminhas.96/a-step-by-step-guide-to-build-and-push-your-own-docker-images-to-dockerhub-709963d4a8bc)
- [Go to the Phala Cloud dashboard](https://cloud.phala.network/), sign up for an account, and add some credits to get started.
- Once you're set up, begin the initial deployment guide below for a step-by-step walkthrough.
- This is a synthesis of the process you'll follow here, but the [official Phala Cloud docs](https://docs.phala.network/phala-cloud/getting-started) are also very helpful and worth reviewing for more details.

### Step 1: Get Phala Cloud Access

<Accordion title="üîß Environment Setup Commands">

Set up your development environment with the necessary tools:

```bash
# Install Node.js and required tools (if not already installed)
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
source ~/.bashrc
nvm install 18.18.0
nvm use 18.18.0

# Initialize your project directory
mkdir my-secure-tee-app && cd my-secure-tee-app
yarn init -y
yarn install

# Install Phala CLI
npm install -g @phala/cli
```

</Accordion>

**Quick Setup Steps:**
1. **Register for Phala Cloud**: Visit [cloud.phala.network](https://cloud.phala.network/) and create your account
2. **Claim free credits**: Get started with complimentary TEE compute credits  
3. **Get API token**: Generate your authentication token from the dashboard
4. **Install CLI tools**: Use the Phala CLI for streamlined deployments

### Step 2: Prepare Your Application  

Choose your application stack and containerize it for TEE deployment:

<Accordion title="Python Flask/FastAPI Application">
<div className="space-y-4">
<p className="text-sm text-gray-700">Perfect for APIs, web services, and data processing applications:</p>

<Accordion title="Flask Web Service Example">

```python
# app.py
from flask import Flask, jsonify, request
import os
import time

app = Flask(__name__)

@app.route('/')
def health_check():
    return jsonify({
        'status': 'healthy',
        'message': 'TEE application running securely',
        'secure': True,
        'timestamp': time.time(),
        'environment': 'phala-tee'
    })

@app.route('/api/data', methods=['POST'])
def process_data():
    data = request.json
    # Your secure processing logic here
    return jsonify({
        'processed': True,
        'secure_computation': 'completed',
        'result': f"Processed {len(data)} items securely"
    })

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=8080)
```

```dockerfile
# Dockerfile
FROM python:3.11-slim
WORKDIR /app
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt
COPY . .
EXPOSE 8080
CMD ["gunicorn", "--bind", "0.0.0.0:8080", "--workers", "2", "app:app"]
```

```text
# requirements.txt
flask==3.0.0
gunicorn==21.2.0
requests==2.31.0
```

</Accordion>
</div>
</Accordion>

<Accordion title="Node.js/TypeScript Application">
<div className="space-y-4">
<p className="text-sm text-gray-700">Great for APIs, real-time applications, and microservices:</p>

<Accordion title="Express.js API Example">

```typescript
// src/app.ts
import express from 'express';
import cors from 'cors';

const app = express();
const PORT = process.env.PORT || 8080;

app.use(cors());
app.use(express.json());

app.get('/', (req, res) => {
  res.json({
    status: 'healthy',
    message: 'TEE Node.js application running',
    secure: true,
    timestamp: new Date().toISOString(),
    environment: 'phala-tee'
  });
});

app.post('/api/compute', (req, res) => {
  const { data } = req.body;
  // Your secure computation logic here
  res.json({
    processed: true,
    secure_computation: 'completed',
    result: `Securely processed: ${JSON.stringify(data)}`
  });
});

app.listen(PORT, '0.0.0.0', () => {
  console.log(`TEE application running on port ${PORT}`);
});
```

```dockerfile
# Dockerfile
FROM node:18-alpine
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production
COPY . .
RUN npm run build
EXPOSE 8080
CMD ["npm", "start"]
```

```json
{
  "name": "tee-app",
  "version": "1.0.0",
  "scripts": {
    "build": "tsc",
    "start": "node dist/app.js"
  },
  "dependencies": {
    "express": "^4.18.0",
    "cors": "^2.8.5"
  },
  "devDependencies": {
    "@types/express": "^4.17.0",
    "typescript": "^5.0.0"
  }
}
```

</Accordion>
</div>
</Accordion>

<Accordion title="Rust Application">
<div className="space-y-4">
<p className="text-sm text-gray-700">Optimal for high-performance, security-critical applications:</p>

<Accordion title="Actix Web Service Example">

```rust
// src/main.rs
use actix_web::{web, App, HttpResponse, HttpServer, Result};
use serde::{Deserialize, Serialize};

#[derive(Serialize)]
struct HealthResponse {
    status: String,
    message: String,
    secure: bool,
    environment: String,
}

#[derive(Deserialize)]
struct ComputeRequest {
    data: String,
}

async fn health() -> Result<HttpResponse> {
    Ok(HttpResponse::Ok().json(HealthResponse {
        status: "healthy".to_string(),
        message: "TEE Rust application running".to_string(),
        secure: true,
        environment: "phala-tee".to_string(),
    }))
}

async fn compute(req: web::Json<ComputeRequest>) -> Result<HttpResponse> {
    // Your secure computation logic here
    Ok(HttpResponse::Ok().json(serde_json::json!({
        "processed": true,
        "secure_computation": "completed",
        "result": format!("Securely processed: {}", req.data)
    })))
}

#[actix_web::main]
async fn main() -> std::io::Result<()> {
    HttpServer::new(|| {
        App::new()
            .route("/", web::get().to(health))
            .route("/api/compute", web::post().to(compute))
    })
    .bind("0.0.0.0:8080")?
    .run()
    .await
}
```

```dockerfile
# Dockerfile
FROM rust:1.75 as builder
WORKDIR /app
COPY Cargo.toml Cargo.lock ./
COPY src ./src
RUN cargo build --release

FROM debian:bookworm-slim
RUN apt-get update && apt-get install -y ca-certificates && rm -rf /var/lib/apt/lists/*
COPY --from=builder /app/target/release/tee-app /usr/local/bin/tee-app
EXPOSE 8080
CMD ["tee-app"]
```

</Accordion>
</div>
</Accordion>

### Step 3: Configure for TEE Deployment

Create your Docker Compose configuration for Phala Cloud:

<Accordion title="üìã Complete docker-compose.yml Template">

```yaml
# docker-compose.yml
version: '3.8'

services:
  app:
    build: .
    # Or use a pre-built image:
    # image: your-registry/your-app:latest
    ports:
      - "8080:8080"
    environment:
      - NODE_ENV=production
      - TEE_ENVIRONMENT=phala-cloud
      - LOG_LEVEL=info
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8080/"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s
    restart: unless-stopped
    deploy:
      resources:
        limits:
          cpus: '2'
          memory: 2G
        reservations:
          cpus: '1'
          memory: 1G

# Optional: Add additional services like databases
# services:
#   redis:
#     image: redis:7-alpine
#     ports:
#       - "6379:6379"
```

</Accordion>

### Step 4: Deploy to Phala Cloud

<Accordion title="üöÄ Initial Deployment Commands">

```bash
# 1. Authenticate with Phala Cloud
phala auth login YOUR_API_TOKEN

# 2. Build and push your container image
docker build -t your-registry/your-app:latest .
docker push your-registry/your-app:latest

# 3. Generate optimized docker-compose for Phala
phala docker generate -o docker-compose.yml

# 4. Deploy to TEE infrastructure
phala cvms create \
  --name your-app-production \
  --compose docker-compose.yml \
  --skip-env

# 5. Check deployment status
phala cvms list
phala cvms logs your-app-production
```

</Accordion>

## Application Management & Updates

### Updating Your Application

<Accordion title="üîÑ Complete Update Script (update_and_deploy.sh)">

This script automates the complete update process for your deployed application:

```bash
#!/bin/bash
# update_and_deploy.sh - Complete Application Update Automation

set -e

# Configuration
APP_NAME="your-app-production"
IMAGE_NAME="your-registry/your-app"
COMPOSE_FILE="docker-compose.yml"

echo "=========================================="
echo "üîÑ Starting Application Update Process"
echo "=========================================="

# Step 1: Pull latest code changes
echo "üì• Pulling latest code from repository..."
git pull origin main
if [ $? -ne 0 ]; then
  echo "‚ùå Error: Failed to pull latest code"
  exit 1
fi

# Step 2: Install/update dependencies
echo "üì¶ Installing dependencies..."
if [ -f "package.json" ]; then
  yarn install
elif [ -f "requirements.txt" ]; then
  pip install -r requirements.txt
elif [ -f "Cargo.toml" ]; then
  cargo build --release
fi

# Step 3: Run tests (if available)
echo "üß™ Running tests..."
if [ -f "package.json" ] && grep -q "test" package.json; then
  yarn test
elif [ -f "pytest.ini" ] || [ -f "tests/" ]; then
  python -m pytest
fi

# Step 4: Build new Docker image
echo "üê≥ Building Docker image..."
docker build -t $IMAGE_NAME:latest .
if [ $? -ne 0 ]; then
  echo "‚ùå Error: Docker build failed"
  exit 1
fi

# Step 5: Build multi-platform image for compatibility
echo "üèóÔ∏è  Building multi-platform image..."
docker buildx build \
  --platform linux/amd64,linux/arm64 \
  -t $IMAGE_NAME:latest \
  --push \
  --provenance=false .

# Step 6: Update Docker Compose configuration
echo "‚öôÔ∏è  Updating Docker Compose configuration..."
if [ -f "update_compose.sh" ]; then
  chmod +x update_compose.sh
  ./update_compose.sh
else
  # Generate new compose file
  phala docker generate -o $COMPOSE_FILE
fi

# Step 7: Deploy update to Phala Cloud
echo "üöÄ Deploying update to Phala Cloud..."
phala cvms update \
  --name $APP_NAME \
  --compose $COMPOSE_FILE

# Step 8: Verify deployment
echo "‚úÖ Verifying deployment..."
sleep 30  # Wait for deployment to stabilize

# Get application URL
APP_URL=$(phala cvms describe $APP_NAME --format json | jq -r '.endpoint')

if [ "$APP_URL" != "null" ] && [ -n "$APP_URL" ]; then
  echo "üåê Testing application endpoint: $APP_URL"
  
  # Test health endpoint
  HTTP_STATUS=$(curl -s -o /dev/null -w "%{http_code}" $APP_URL)
  
  if [ "$HTTP_STATUS" = "200" ]; then
    echo "‚úÖ Application update completed successfully!"
    echo "üîó Access your app at: $APP_URL"
  else
    echo "‚ö†Ô∏è  Application deployed but health check failed (HTTP $HTTP_STATUS)"
    echo "Check logs: phala cvms logs $APP_NAME"
  fi
else
  echo "‚ö†Ô∏è  Could not retrieve application URL"
  echo "Check deployment status: phala cvms describe $APP_NAME"
fi

echo "=========================================="
echo "üìä Deployment Summary"
echo "=========================================="
echo "App Name: $APP_NAME"
echo "Image: $IMAGE_NAME:latest"
echo "Compose: $COMPOSE_FILE"
echo "Status: $(phala cvms describe $APP_NAME --format json | jq -r '.status')"
echo "URL: $APP_URL"
echo "=========================================="
```

</Accordion>

### Monitoring and Troubleshooting

<Accordion title="üìä Application Monitoring Commands">

```bash
# Check application status
phala cvms describe your-app-production

# View real-time logs
phala cvms logs your-app-production --follow

# Check resource usage
phala cvms stats your-app-production

# Get application metrics
curl "https://your-app-url.dstack-prod7.phala.network:3000/metrics"

# Restart application if needed
phala cvms restart your-app-production

# Scale application resources
phala cvms update your-app-production \
  --cpu 4 \
  --memory 4096M
```

</Accordion>

## ‚ö° Production-Ready Scripts

<div className="bg-amber-50 border border-amber-200 rounded-lg p-4 mb-6">
  <h4 className="font-medium text-amber-800 mb-2">üìã Enterprise Deployment Automation</h4>
  <p className="text-sm text-amber-700">
    Production-grade scripts for CI/CD integration, monitoring, and automated deployments. These scripts include error handling, rollback capabilities, and comprehensive logging.
  </p>
</div>

<Accordion title="Complete CI/CD Integration Script">
<div className="space-y-4">
<p className="text-sm text-gray-700">Full automation script suitable for GitHub Actions, GitLab CI, or Jenkins:</p>

```bash
#!/bin/bash
# ci_cd_deploy.sh - Complete CI/CD Pipeline for Phala Cloud

set -e

# Configuration from environment variables
APP_NAME=${APP_NAME:-"my-tee-app"}
IMAGE_REGISTRY=${IMAGE_REGISTRY:-"ghcr.io/your-org"}
IMAGE_NAME="${IMAGE_REGISTRY}/${APP_NAME}"
PHALA_TOKEN=${PHALA_TOKEN}
ENVIRONMENT=${ENVIRONMENT:-"production"}

# Colors for output
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m' # No Color

log() {
  echo -e "${BLUE}[$(date +'%Y-%m-%d %H:%M:%S')]${NC} $1"
}

error() {
  echo -e "${RED}[ERROR]${NC} $1" >&2
}

success() {
  echo -e "${GREEN}[SUCCESS]${NC} $1"
}

warning() {
  echo -e "${YELLOW}[WARNING]${NC} $1"
}

# Validate environment
validate_environment() {
  log "Validating environment..."
  
  if [ -z "$PHALA_TOKEN" ]; then
    error "PHALA_TOKEN environment variable is required"
    exit 1
  fi
  
  if ! command -v docker &> /dev/null; then
    error "Docker is not installed"
    exit 1
  fi
  
  if ! command -v phala &> /dev/null; then
    error "Phala CLI is not installed"
    exit 1
  fi
  
  success "Environment validation passed"
}

# Build and test
build_and_test() {
  log "Building application..."
  
  # Install dependencies based on project type
  if [ -f "package.json" ]; then
    yarn install --frozen-lockfile
    yarn build
    if grep -q "test" package.json; then
      yarn test
    fi
  elif [ -f "requirements.txt" ]; then
    pip install -r requirements.txt
    if [ -f "tests/" ] || [ -f "pytest.ini" ]; then
      python -m pytest
    fi
  elif [ -f "Cargo.toml" ]; then
    cargo test
    cargo build --release
  fi
  
  success "Build and tests completed"
}

# Docker operations
docker_build_and_push() {
  local tag="${1:-latest}"
  local full_image="${IMAGE_NAME}:${tag}"
  
  log "Building Docker image: $full_image"
  
  # Build image
  docker build -t "$full_image" .
  
  # Build multi-platform and push
  docker buildx build \
    --platform linux/amd64,linux/arm64 \
    -t "$full_image" \
    --push \
    --provenance=false .
  
  success "Docker image built and pushed: $full_image"
}

# Deploy to Phala Cloud
deploy_to_phala() {
  local app_name="$1"
  local image_tag="${2:-latest}"
  
  log "Deploying $app_name to Phala Cloud..."
  
  # Authenticate
  phala auth login "$PHALA_TOKEN"
  
  # Generate Docker Compose
  phala docker generate -o docker-compose.yml
  
  # Update image in compose file
  sed -i "s|image: .*|image: ${IMAGE_NAME}:${image_tag}|g" docker-compose.yml
  
  # Check if CVM exists
  if phala cvms describe "$app_name" &>/dev/null; then
    log "Updating existing CVM: $app_name"
    phala cvms update --name "$app_name" --compose docker-compose.yml
  else
    log "Creating new CVM: $app_name"
    phala cvms create --name "$app_name" --compose docker-compose.yml --skip-env
  fi
  
  success "Deployment completed"
}

# Health check
health_check() {
  local app_name="$1"
  local max_attempts=30
  local attempt=1
  
  log "Performing health check for $app_name..."
  
  while [ $attempt -le $max_attempts ]; do
    log "Health check attempt $attempt/$max_attempts"
    
    # Get app status
    status=$(phala cvms describe "$app_name" --format json | jq -r '.status' 2>/dev/null || echo "unknown")
    
    if [ "$status" = "running" ]; then
      # Get endpoint and test
      endpoint=$(phala cvms describe "$app_name" --format json | jq -r '.endpoint' 2>/dev/null)
      
      if [ "$endpoint" != "null" ] && [ -n "$endpoint" ]; then
        if curl -sf "$endpoint" > /dev/null; then
          success "Health check passed - application is healthy"
          return 0
        fi
      fi
    fi
    
    sleep 10
    ((attempt++))
  done
  
  error "Health check failed after $max_attempts attempts"
  return 1
}

# Main execution
main() {
  local git_sha=$(git rev-parse --short HEAD 2>/dev/null || echo "unknown")
  local timestamp=$(date +%s)
  local image_tag="${ENVIRONMENT}-${git_sha}-${timestamp}"
  local app_name="${APP_NAME}-${ENVIRONMENT}"
  
  log "Starting CI/CD pipeline for $app_name"
  log "Image tag: $image_tag"
  
  # Validate environment
  validate_environment
  
  # Build and test
  build_and_test
  
  # Docker build and push
  docker_build_and_push "$image_tag"
  
  # Tag as latest for this environment
  docker tag "${IMAGE_NAME}:${image_tag}" "${IMAGE_NAME}:${ENVIRONMENT}-latest"
  docker push "${IMAGE_NAME}:${ENVIRONMENT}-latest"
  
  # Deploy
  deploy_to_phala "$app_name" "$image_tag"
  
  # Health check
  if health_check "$app_name"; then
    success "Deployment pipeline completed successfully"
    
    # Get final app info
    endpoint=$(phala cvms describe "$app_name" --format json | jq -r '.endpoint')
    log "Application available at: $endpoint"
    
    # Save deployment info
    cat > deployment-info.json << EOF
{
  "app_name": "$app_name",
  "image_tag": "$image_tag",
  "endpoint": "$endpoint",
  "deployed_at": "$(date -u +%Y-%m-%dT%H:%M:%SZ)",
  "git_sha": "$git_sha"
}
EOF
    
  else
    error "Deployment failed health check"
    exit 1
  fi
}

# Error handling
trap 'error "Pipeline failed at line $LINENO"' ERR

# Run main function
main "$@"
```

<div className="bg-blue-50 p-3 rounded">
<p className="text-xs text-blue-800"><strong>Usage:</strong> Set environment variables (APP_NAME, PHALA_TOKEN, etc.) and run ./ci_cd_deploy.sh</p>
</div>
</div>
</Accordion>

<Accordion title="Application Monitoring Dashboard Script">
<div className="space-y-4">
<p className="text-sm text-gray-700">Comprehensive monitoring script that provides real-time application metrics:</p>

```bash
#!/bin/bash
# monitor_app.sh - Real-time Application Monitoring

APP_NAME=${1:-"my-tee-app-production"}
REFRESH_INTERVAL=${2:-5}

# Colors
GREEN='\033[0;32m'
RED='\033[0;31m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m'

clear_screen() {
  clear
  echo -e "${BLUE}‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó${NC}"
  echo -e "${BLUE}‚ïë                          TEE Application Monitor                            ‚ïë${NC}"
  echo -e "${BLUE}‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù${NC}"
  echo ""
}

get_app_info() {
  phala cvms describe "$APP_NAME" --format json 2>/dev/null || echo "{}"
}

display_status() {
  local app_info=$(get_app_info)
  local status=$(echo "$app_info" | jq -r '.status // "unknown"')
  local endpoint=$(echo "$app_info" | jq -r '.endpoint // "none"')
  local created=$(echo "$app_info" | jq -r '.created_at // "unknown"')
  
  echo -e "${YELLOW}Application:${NC} $APP_NAME"
  echo -e "${YELLOW}Status:${NC} $([ "$status" = "running" ] && echo -e "${GREEN}$status${NC}" || echo -e "${RED}$status${NC}")"
  echo -e "${YELLOW}Endpoint:${NC} $endpoint"
  echo -e "${YELLOW}Created:${NC} $created"
  echo ""
}

check_health() {
  local app_info=$(get_app_info)
  local endpoint=$(echo "$app_info" | jq -r '.endpoint // ""')
  
  if [ -n "$endpoint" ] && [ "$endpoint" != "null" ]; then
    local response_time=$(curl -o /dev/null -s -w "%{time_total}" "$endpoint" 2>/dev/null || echo "0")
    local http_code=$(curl -o /dev/null -s -w "%{http_code}" "$endpoint" 2>/dev/null || echo "000")
    
    echo -e "${YELLOW}Health Check:${NC}"
    echo "  HTTP Status: $([ "$http_code" = "200" ] && echo -e "${GREEN}$http_code${NC}" || echo -e "${RED}$http_code${NC}")"
    echo "  Response Time: ${response_time}s"
  else
    echo -e "${YELLOW}Health Check:${NC} ${RED}No endpoint available${NC}"
  fi
  echo ""
}

display_logs() {
  echo -e "${YELLOW}Recent Logs:${NC}"
  echo "‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"
  phala cvms logs "$APP_NAME" --tail 10 2>/dev/null | sed 's/^/  /' || echo "  No logs available"
  echo ""
}

display_resources() {
  local stats=$(phala cvms stats "$APP_NAME" 2>/dev/null || echo "{}")
  
  echo -e "${YELLOW}Resource Usage:${NC}"
  if [ "$stats" != "{}" ]; then
    echo "$stats" | jq -r '. | "  CPU: \(.cpu)%, Memory: \(.memory), Network: \(.network)"' 2>/dev/null || echo "  Stats not available"
  else
    echo "  Resource stats not available"
  fi
  echo ""
}

main_loop() {
  while true; do
    clear_screen
    display_status
    check_health
    display_resources
    display_logs
    
    echo -e "${BLUE}Press Ctrl+C to exit | Refreshing every ${REFRESH_INTERVAL}s${NC}"
    sleep "$REFRESH_INTERVAL"
  done
}

# Error handling
trap 'echo -e "\n${YELLOW}Monitoring stopped${NC}"; exit 0' INT TERM

# Validate app exists
if ! phala cvms describe "$APP_NAME" &>/dev/null; then
  echo -e "${RED}Error: Application '$APP_NAME' not found${NC}"
  echo "Available applications:"
  phala cvms list
  exit 1
fi

# Start monitoring
main_loop
```

<div className="bg-green-50 p-3 rounded">
<p className="text-xs text-green-800"><strong>Usage:</strong> ./monitor_app.sh [app-name] [refresh-interval]</p>
</div>
</div>
</Accordion>

## Getting Your Application URL

After deployment, your application will be accessible via a secure HTTPS endpoint. Here's how to find and use it:

<Accordion title="üîó Application Access Information">

```bash
# Get your application details
phala cvms describe your-app-production --format json

# Extract the endpoint URL
APP_URL=$(phala cvms describe your-app-production --format json | jq -r '.endpoint')

# Your URL will look like this:
# https://abc123def456.dstack-prod7.phala.network:3000

# Test your application
curl $APP_URL
curl $APP_URL/api/health

# Access in browser
echo "Access your app at: $APP_URL"
```

**URL Structure:**
- **Subdomain**: Unique identifier for your CVM
- **Domain**: Phala's secure gateway domain  
- **Port**: Your application's exposed port (typically 3000 or 8080)
- **Security**: All endpoints are automatically HTTPS-enabled

</Accordion>

## Next Steps

<div className="bg-blue-50 border border-blue-200 rounded-lg p-6 mt-8">
  <h3 className="font-semibold text-blue-900 mb-3">üéâ Congratulations on Your TEE Deployment!</h3>
  <p className="text-sm text-blue-800 mb-4">
    Your application is now running in a hardware-secured Trusted Execution Environment with enterprise-grade security guarantees.
  </p>
  
  <div className="grid grid-cols-2 gap-4 text-sm">
    <div>
      <h4 className="font-medium text-blue-800 mb-2">üîê Security Features Active:</h4>
      <ul className="text-blue-700 space-y-1">
        <li>‚Ä¢ Memory encryption (Intel TDX)</li>
        <li>‚Ä¢ Remote attestation available</li>
        <li>‚Ä¢ Zero-trust compute environment</li>
        <li>‚Ä¢ Automatic HTTPS/TLS encryption</li>
      </ul>
    </div>
    <div>
      <h4 className="font-medium text-blue-800 mb-2">üìà What's Next:</h4>
      <ul className="text-blue-700 space-y-1">
        <li>‚Ä¢ <a href="/docs/concepts/security-model" className="underline">Learn about TEE security</a></li>
        <li>‚Ä¢ <a href="/docs/tutorials/python-example" className="underline">Advanced tutorials</a></li>
        <li>‚Ä¢ <a href="/docs/api-reference/overview" className="underline">API integration guides</a></li>
        <li>‚Ä¢ Scale to production workloads</li>
      </ul>
    </div>
  </div>
  
  <div className="mt-4 p-3 bg-blue-100 rounded">
    <p className="text-xs text-blue-800">
      <strong>Ready for more control?</strong> Explore our <a href="/docs/getting-started/installation" className="underline font-medium">self-hosted deployment path</a> to build your own dstack infrastructure with full customization capabilities.
    </p>
  </div>
</div>

