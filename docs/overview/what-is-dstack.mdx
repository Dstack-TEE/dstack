---
title: "What is dStack?"
description: "A comprehensive exploration of dstack's architecture, detailing its components and security principles for confidential containers using Intel TDX."
---

# DStack Architecture 

This page gives you a high-level overview of dstack's architectureâ€”a developer-friendly SDK designed for secure deployment of containerized applications in Trusted Execution Environments (TEEs). By leveraging Intel TDX (Trust Domain Extensions), dstack enables confidential containers that keep your data and code protected through hardware-based isolation. Here, you'll get a look at the platform's main components, how they work together, and the security model that underpins dstack.

## Introduction

dstack is a developer-friendly and security-first SDK that simplifies the deployment of arbitrary containerized applications into TEE environments [1](#0-0) . It uses Intel TDX technology to create Confidential Virtual Machines (CVMs) that provide hardware-based isolation for sensitive workloads. Unlike traditional deployment solutions, dstack allows developers to use familiar tools like docker-compose.yaml files while automatically handling the complexities of TEE deployment, key management, and secure networking [2](#0-1) .

The platform is community-driven, open-sourced, and built by Kevin Wang and many others from Phala Network, inspired by Andrew Miller from Flashbots and Teleport, with contributions from Nethermind and the broader community [3](#0-2) .

## System Design

At its core, dstack's architecture revolves around the seamless integration of five primary components: dstack-vmm, dstack-gateway, dstack-kms, dstack-guest-agent, and supervisor [4](#0-3) . Together, they form a cohesive system that manages virtual machines, handles cryptographic keys, and secures communication channels while providing a familiar development experience.

dstack-vmm serves as the service running on TDX host to manage CVMs, while dstack-gateway acts as a reverse proxy to forward TLS connections to CVMs. dstack-kms provides key management services, and dstack-guest-agent runs inside the CVM to serve containers' key derivation and attestation requests [5](#0-4) .

## Deep Dive into Components

### Virtual Machine Manager (dstack-vmm)

dstack-vmm is the service running on bare TDX host hardware that manages the lifecycle of Confidential Virtual Machines [6](#0-5) . It handles VM creation, configuration, and deployment orchestration while ensuring that each CVM is properly isolated and measured during the boot process.

The VMM provides a web interface accessible at port 9080 for deploying docker-compose.yaml files, monitoring VM status, and accessing logs [7](#0-6) . It integrates with the other dstack components to ensure secure deployment and operation of containerized workloads.

### Gateway and Reverse Proxy (dstack-gateway)

dstack-gateway operates as a reverse proxy that forwards TLS connections to CVMs [8](#0-7) . It provides secure access to deployed applications through domain-based routing with built-in TLS termination [9](#0-8) .

The gateway supports multiple access patterns including standard routing where `<id>.<base_domain>` maps to port 80 in the CVM, port-specific routing with `<id>-<port>.<base_domain>`, and TLS passthrough using the 's' suffix for applications that manage their own certificates [10](#0-9) . It uses WireGuard VPN to create encrypted tunnels between the gateway and CVMs for secure communication.

### Key Management Service (dstack-kms)

dstack-kms is the KMS server that generates and manages cryptographic keys for CVMs [11](#0-10) . It integrates with blockchain-based authorization through smart contracts to ensure that only verified applications can access cryptographic keys.

The KMS validates TEE attestation reports before releasing keys, ensuring that only trusted environments running verified code can access sensitive cryptographic material. It supports key derivation for various purposes including disk encryption, environment variable encryption, and certificate generation.

### Guest Agent (dstack-guest-agent)

dstack-guest-agent is the service running inside CVMs that serves containers' key derivation and attestation requests [12](#0-11) . Applications can interact with the guest agent through a Unix socket mounted at `/var/run/dstack.sock` to obtain TDX quotes for remote attestation [13](#0-12) .

The guest agent handles the communication between containerized applications and the host system while maintaining the security boundaries of the TEE environment.

### Process Management (supervisor)

The supervisor component manages and monitors running processes across the dstack system, ensuring reliable operation of all services and handling process lifecycle management.

## Security and Trust Model

dstack implements a comprehensive security model centered around Intel TDX technology, which provides hardware-based isolation for confidential workloads. The system uses remote attestation to verify the integrity of deployed applications and relies on cryptographic measurements stored in hardware registers.

The security architecture includes TDX quotes for attestation, measurement registers (MRTD, RTMR0-3) for tracking system state, and blockchain-based smart contracts for authorization [14](#0-13) . This multi-layered approach ensures that only authorized code can run in the trusted environment and that all interactions are secured and auditable.

Key security features include secure boot processes, encrypted communication channels using WireGuard VPN, TLS certificate management with Certificate Transparency monitoring, and comprehensive logging for security auditing.

## Secret Management

dstack provides secure handling of sensitive data through Encrypted Environment Variables. When deploying applications, secrets are encrypted client-side using public keys provided by the KMS, transmitted securely to the VMM, and only decrypted within the Confidential VM using keys derived from TDX attestation [15](#0-14) . This ensures sensitive data remains protected throughout the deployment process.

## Certificate Management and Transparency

The platform includes automated TLS certificate management through integration with Let's Encrypt and Cloudflare DNS. It implements Certificate Authority Authorization (CAA) records to restrict certificate issuance and monitors Certificate Transparency logs to detect unauthorized certificates [16](#0-15) . This comprehensive approach helps prevent man-in-the-middle attacks and ensures the integrity of TLS connections.

## Getting Started

To deploy applications with dstack, you need a TDX-compatible server with public IPv4 address, at least 16GB RAM, and 100GB free disk space [17](#0-16) . The deployment process involves:

1. Setting up the TDX host with necessary dependencies
2. Building or downloading dstack components
3. Configuring and running dstack-kms, dstack-gateway, and dstack-vmm
4. Deploying applications using standard docker-compose.yaml files through the web interface

## Use Cases and Benefits

dstack enables secure deployment of containerized workloads in confidential computing environments, making it suitable for applications requiring data privacy, code protection, and verifiable execution. The platform provides benefits such as:

- Developer-friendly experience with familiar Docker tools
- Hardware-based security through Intel TDX
- Automated key management and certificate handling
- Secure networking with built-in VPN and TLS termination
- Remote attestation capabilities for trust verification

## Where to Go Next

For hands-on deployment, follow the build and setup instructions in the main repository. The system provides web interfaces for VM management and monitoring, with comprehensive logging and debugging capabilities for troubleshooting deployments.

To get started with development, explore the component documentation and examples in the dstack repository, which includes detailed setup instructions, configuration examples, and troubleshooting guides.

---

**TL;DR**: dstack is a developer-friendly SDK for deploying containerized applications in Intel TDX-based Trusted Execution Environments, providing hardware-based security with familiar Docker tooling.
