# SPDX-FileCopyrightText: 2024-2025 Phala Network <dstack@phala.network>
#
# SPDX-License-Identifier: Apache-2.0

# dstack-simulator configuration for e2e testing (HTTP mode for containers)

[default]
workers = 4
max_blocking = 32
ident = "dstack Simulator (E2E)"
temp_dir = "/tmp"
keep_alive = 10
log_level = "debug"

[default.core]
# Use files from sdk/simulator directory (mounted as /sdk)
keys_file = "/sdk/appkeys.json"
compose_file = "/sdk/app-compose.json"
sys_config_file = "/sdk/sys-config.json"

[default.core.simulator]
enabled = true
attestation_file = "/sdk/attestation.bin"

# HTTP endpoints for container access
# All interfaces must be defined for the simulator to start

[internal-v0]
address = "0.0.0.0"
port = 8091
reuse = true

# Gateway uses /prpc endpoint on internal interface
[internal]
address = "0.0.0.0"
port = 8090
reuse = true

[external]
address = "0.0.0.0"
port = 8092
reuse = true

[guest-api]
address = "0.0.0.0"
port = 8093
reuse = true
