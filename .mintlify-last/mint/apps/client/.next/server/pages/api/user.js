!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="f47d04d5-13e0-4505-9da0-9de4a9ef1d24",e._sentryDebugIdIdentifier="sentry-dbid-f47d04d5-13e0-4505-9da0-9de4a9ef1d24")}catch(e){}}();"use strict";(()=>{var e={};e.id=541,e.ids=[541],e.modules={58097:e=>{e.exports=require("@sentry/nextjs")},75666:e=>{e.exports=require("crypto-js")},20145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},44042:e=>{e.exports=require("unique-string")},99369:e=>{e.exports=import("jose")},69915:e=>{e.exports=import("js-cookie")},64870:(e,t,n)=>{n.a(e,async(e,r)=>{try{let l;n.r(t),n.d(t,{config:()=>y,default:()=>E});var o=n(58097),a=n(99369),s=n(61733),i=n(30613),u=n(17037),p=e([a,u]);async function d(e,t){if(i.F9.AUTH_ENABLED&&process.env.END_USER_AUTH_PUBLIC_KEY){let n=e.cookies[s.TM];if(!n)return t.status(401).json({error:"Unauthorized",message:"No authentication token provided"});try{let e=await (0,a.importSPKI)(process.env.END_USER_AUTH_PUBLIC_KEY,"EdDSA"),{payload:r}=await (0,a.jwtVerify)(n,e);if(r.userInfo&&(0,u.YZ)(r.userInfo))return t.json({user:r.userInfo})}catch(e){return t.status(401).json({error:"Unauthorized",message:"Invalid authentication token"})}}return t.status(401).json({error:"Unauthorized",message:"Authentication is required"})}[a,u]=p.then?(await p)():p;var c=Object.freeze({__proto__:null,default:d});"default"in c&&"function"==typeof c.default?l=c.default:"function"==typeof c&&(l=c);let f=c.config||{},y={...f,api:{...f.api,externalResolver:!0}},_=l;_&&(_=o.wrapApiHandlerWithSentry(_,"/api/user"));let E=_;r()}catch(e){r(e)}})},76835:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,n){return n in t?t[n]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,n)):"function"==typeof t&&"default"===n?t:void 0}}})},68491:(e,t,n)=>{n.a(e,async(e,r)=>{try{n.r(t),n.d(t,{config:()=>d,default:()=>p,routeModule:()=>c});var o=n(9150),a=n(81631),s=n(76835),i=n(64870),u=e([i]);i=(u.then?(await u)():u)[0];let p=(0,s.l)(i,"default"),d=(0,s.l)(i,"config"),c=new o.PagesAPIRouteModule({definition:{kind:a.x.PAGES_API,page:"/api/user",pathname:"/api/user",bundlePath:"",filename:""},userland:i});r()}catch(e){r(e)}})},61733:(e,t,n)=>{n.d(t,{TM:()=>o});var r=n(30613);r.lC,r.lC;let o="mintlify_end_user_auth"},30613:(e,t,n)=>{n.d(t,{F9:()=>a,hp:()=>r,lC:()=>o});let r=process.env.REVALIDATION_TOKEN;process.env.EXPORT_TOKEN,process.env.INTERNAL_ANALYTICS_WRITE_KEY,process.env.BASE_PATH,process.env.HOST_NAME;let o="production";process.env.IS_MULTI_TENANT,process.env.VERCEL;let a={SENTRY_DSN:process.env.NEXT_PUBLIC_SENTRY_DSN,ENV:"cli",TRIEVE_API_KEY:process.env.NEXT_PUBLIC_TRIEVE_API_KEY,AUTH_ENABLED:process.env.NEXT_PUBLIC_AUTH_ENABLED,CUSTOM_JS_DISABLED:process.env.NEXT_PUBLIC_CUSTOM_JS_DISABLED,ASSET_PREFIX:process.env.NEXT_PUBLIC_ASSET_PREFIX??""}},17037:(e,t,n)=>{n.a(e,async(e,r)=>{try{n.d(t,{YZ:()=>s}),n(61733);var o=n(97069),a=e([o]);function s(e){return!!e&&"object"==typeof e&&(!("expiresAt"in e)||"number"==typeof e.expiresAt)&&(!("groups"in e)||Array.isArray(e.groups)&&e.groups.every(e=>"string"==typeof e))&&(!("content"in e)||!!e.content&&"object"==typeof e.content)&&(!("apiPlaygroundInputs"in e)||!!e.apiPlaygroundInputs&&"object"==typeof e.apiPlaygroundInputs&&(!("header"in e.apiPlaygroundInputs)||!!e.apiPlaygroundInputs.header&&"object"==typeof e.apiPlaygroundInputs.header)&&(!("cookie"in e.apiPlaygroundInputs)||!!e.apiPlaygroundInputs.cookie&&"object"==typeof e.apiPlaygroundInputs.cookie)&&(!("query"in e.apiPlaygroundInputs)||!!e.apiPlaygroundInputs.query&&"object"==typeof e.apiPlaygroundInputs.query)&&(!("server"in e.apiPlaygroundInputs)||!!e.apiPlaygroundInputs.server&&"object"==typeof e.apiPlaygroundInputs.server))}o=(a.then?(await a)():a)[0],r()}catch(e){r(e)}})},97069:(e,t,n)=>{n.a(e,async(e,t)=>{try{n(75666);var r=n(69915);n(44042);var o=e([r]);r=(o.then?(await o)():o)[0];t()}catch(e){t(e)}})},81631:(e,t)=>{var n;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return n}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(n||(n={}))},9150:(e,t,n)=>{e.exports=n(20145)}};var t=require("../../webpack-api-runtime.js");t.C(e);var n=t(t.s=68491);module.exports=n})();
//# sourceMappingURL=user.js.map